<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 利用R語言進行監督式機器學習 | R語言課程講義</title>
  <meta name="description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 利用R語言進行監督式機器學習 | R語言課程講義" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 利用R語言進行監督式機器學習 | R語言課程講義" />
  
  <meta name="twitter:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  

<meta name="author" content="林頌堅" />


<meta name="date" content="2019-08-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unsupervised-machine-learning.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R語言課程講義</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R語言的基本概念與語法</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e8aab2e7a88be7b0a1e4bb8b"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="1.0.1" data-path="intro.html"><a href="intro.html#section-1.0.1"><i class="fa fa-check"></i><b>1.0.1</b> 學習目標</a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1</b> R語言的基本概念</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.2</b> R語言的運算</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R語言的基本資料型態</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 數值資料型態</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#section-1.3.2"><i class="fa fa-check"></i><b>1.3.2</b> 文字資料型態</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#section-1.3.3"><i class="fa fa-check"></i><b>1.3.3</b> 邏輯資料型態</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#factor"><i class="fa fa-check"></i><b>1.3.4</b> factor資料型態</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.4</b> R語言的特殊資料型態</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#vector"><i class="fa fa-check"></i><b>1.4.1</b> vector</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#matrix"><i class="fa fa-check"></i><b>1.4.2</b> matrix</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#list"><i class="fa fa-check"></i><b>1.4.3</b> list</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>1.4.4</b> data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5b08fe7b590"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5bbb6e4bcb8e6809de88083"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>2</b> 運用R語言進行資料處理</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 預備工作</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 設定工作目錄</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 讀入檔案資料</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.1"><i class="fa fa-check"></i><b>2.2.1</b> 讀入空氣品質指標資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.2"><i class="fa fa-check"></i><b>2.2.2</b> 瀏覽讀入的資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> 資料整理</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#aqina"><i class="fa fa-check"></i><b>2.3.1</b> 去除AQI為NA的資料紀錄</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#variable"><i class="fa fa-check"></i><b>2.3.2</b> Variable資料型態變更</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> 資料分析</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.1"><i class="fa fa-check"></i><b>2.4.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.2"><i class="fa fa-check"></i><b>2.4.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.3"><i class="fa fa-check"></i><b>2.4.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.4"><i class="fa fa-check"></i><b>2.4.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> 程式存檔</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1</b> tidy資料格式簡介</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.1</b> tidy資料格式的特徵</a></li>
<li class="chapter" data-level="3.1.2" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.2</b> tidy資料格式的優點</a></li>
<li class="chapter" data-level="3.1.3" data-path="tidyverse.html"><a href="tidyverse.html#wide-format-vs.long-format"><i class="fa fa-check"></i><b>3.1.3</b> wide format vs. long format</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.2</b> tidyverse套件</a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data-format"><i class="fa fa-check"></i><b>3.3</b> tidy data format的資料分析方法</a><ul>
<li class="chapter" data-level="3.3.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.3.2</b> 使用tidyverse套件的函數</a></li>
<li class="chapter" data-level="3.3.3" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.3.3</b> 資料整理</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4</b> 資料分析</a><ul>
<li class="chapter" data-level="3.4.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="3.4.2" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="3.4.3" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="3.4.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> 資料視覺化</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> 資訊視覺化簡介</a></li>
<li class="chapter" data-level="4.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>4.2</b> R語言的資料視覺化工具</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.1</b> ggplot2的運作概念</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#aesthetics"><i class="fa fa-check"></i><b>4.2.2</b> Aesthetics上幾種常用的資料編碼方式</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-geometrics"><i class="fa fa-check"></i><b>4.2.3</b> ggplot2上幾種常用的圖表類型 (Geometrics)</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.4</b> 使用ggplot2套件</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3"><i class="fa fa-check"></i><b>4.3</b> 以資料視覺化的方式進行資料探索</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i><b>4.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3.2"><i class="fa fa-check"></i><b>4.3.2</b> 問題</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#section-4.4"><i class="fa fa-check"></i><b>4.4</b> 利用直方圖呈現資料的分布情形</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#section-4.5"><i class="fa fa-check"></i><b>4.5</b> 利用長條圖進行資料之間的比較</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#section-4.6"><i class="fa fa-check"></i><b>4.6</b> 利用散佈圖呈現兩個數值之間的關係</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#section-4.7"><i class="fa fa-check"></i><b>4.7</b> 使用盒狀圖比較多個群體的分布情形</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#section-4.8"><i class="fa fa-check"></i><b>4.8</b> 利用並列的多個圖表進行比較</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>5</b> 利用R語言進行探索性資料分析</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-8"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-9"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.1"><i class="fa fa-check"></i><b>5.1</b> 探索性資料分析是什麼？</a></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 以環保署日空氣品質指標開放資料為例進行探索性資料分析</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="statistical-analysis.html"><a href="statistical-analysis.html"><i class="fa fa-check"></i><b>6</b> 利用R語言進行基本的統計分析</a><ul>
<li class="chapter" data-level="" data-path="statistical-analysis.html"><a href="statistical-analysis.html#-10"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="statistical-analysis.html"><a href="statistical-analysis.html#-11"><i class="fa fa-check"></i>課程簡介</a></li>
</ul></li>
<li class="chapter" data-level="6.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 描述性統計</a><ul>
<li class="chapter" data-level="6.1.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.1.1"><i class="fa fa-check"></i><b>6.1.1</b> 測量資料的集中趨勢</a></li>
<li class="chapter" data-level="6.1.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.1.2"><i class="fa fa-check"></i><b>6.1.2</b> 測量資料的離散程度</a></li>
<li class="chapter" data-level="6.1.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.1.3"><i class="fa fa-check"></i><b>6.1.3</b> 偏態與峰態</a></li>
<li class="chapter" data-level="6.1.4" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i><b>6.1.4</b> 小結</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.2"><i class="fa fa-check"></i><b>6.2</b> 資料相關性</a></li>
<li class="chapter" data-level="6.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 比較兩組資料的平均數</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html"><i class="fa fa-check"></i><b>7</b> 利用R語言進行非監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-12"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-13"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="7.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 資料探勘的定義</a><ul>
<li class="chapter" data-level="7.1.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1.1"><i class="fa fa-check"></i><b>7.1.1</b> 資料探勘的步驟</a></li>
<li class="chapter" data-level="7.1.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1.2"><i class="fa fa-check"></i><b>7.1.2</b> 資料探勘的分類</a></li>
<li class="chapter" data-level="7.1.3" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1.3"><i class="fa fa-check"></i><b>7.1.3</b> 集群分析</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 以進出站人數統計資料對臺鐵各站點進行集群分析</a><ul>
<li class="chapter" data-level="7.2.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.1"><i class="fa fa-check"></i><b>7.2.1</b> 載入相關套件</a></li>
<li class="chapter" data-level="7.2.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.2"><i class="fa fa-check"></i><b>7.2.2</b> 讀取資料</a></li>
<li class="chapter" data-level="7.2.3" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.3"><i class="fa fa-check"></i><b>7.2.3</b> 查看資料的樣貌與修改可能的錯誤</a></li>
<li class="chapter" data-level="7.2.4" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.4"><i class="fa fa-check"></i><b>7.2.4</b> 產生站點資料特徵</a></li>
<li class="chapter" data-level="7.2.5" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.5"><i class="fa fa-check"></i><b>7.2.5</b> 維度縮減</a></li>
<li class="chapter" data-level="7.2.6" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.6"><i class="fa fa-check"></i><b>7.2.6</b> 將站點依據彼此距離視覺化</a></li>
<li class="chapter" data-level="7.2.7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.7"><i class="fa fa-check"></i><b>7.2.7</b> 站點集群</a></li>
<li class="chapter" data-level="7.2.8" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.8"><i class="fa fa-check"></i><b>7.2.8</b> 結果的解釋</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html"><i class="fa fa-check"></i><b>8</b> 利用R語言進行監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-14"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-15"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="8.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> 監督式機器學習</a></li>
<li class="chapter" data-level="8.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#tmdb"><i class="fa fa-check"></i><b>8.2</b> TMDB電影評分預測</a><ul>
<li class="chapter" data-level="8.2.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.2.1"><i class="fa fa-check"></i><b>8.2.1</b> 讀入資料</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 資料整理與探索性資料分析</a><ul>
<li class="chapter" data-level="8.3.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#variables"><i class="fa fa-check"></i><b>8.3.1</b> 處理與本次分析無關的variables</a></li>
<li class="chapter" data-level="8.3.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 數值資料類型</a></li>
<li class="chapter" data-level="8.3.3" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.3"><i class="fa fa-check"></i><b>8.3.3</b> 日期資料類型</a></li>
<li class="chapter" data-level="8.3.4" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.4"><i class="fa fa-check"></i><b>8.3.4</b> 簡單字串類型</a></li>
<li class="chapter" data-level="8.3.5" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.5"><i class="fa fa-check"></i><b>8.3.5</b> 複雜字串資料類型</a></li>
<li class="chapter" data-level="8.3.6" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.6"><i class="fa fa-check"></i><b>8.3.6</b> 準備預測目標</a></li>
<li class="chapter" data-level="8.3.7" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.7"><i class="fa fa-check"></i><b>8.3.7</b> 完成資料整理</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.4"><i class="fa fa-check"></i><b>8.4</b> 監督式機器學習常用的測試套件</a><ul>
<li class="chapter" data-level="8.4.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.4.1"><i class="fa fa-check"></i><b>8.4.1</b> 切分訓練與測試資料</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.5"><i class="fa fa-check"></i><b>8.5</b> 進行分類樹監督式學習</a><ul>
<li class="chapter" data-level="8.5.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#rpart"><i class="fa fa-check"></i><b>8.5.1</b> 利用rpart套件進行分類樹監督式學習</a></li>
<li class="chapter" data-level="8.5.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#caretrpart"><i class="fa fa-check"></i><b>8.5.2</b> 利用caret套件的rpart方法進行分類樹監督式學習</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 進行隨機森林監督式學習</a><ul>
<li class="chapter" data-level="8.6.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section"><i class="fa fa-check"></i><b>8.6.1</b> </a></li>
<li class="chapter" data-level="8.6.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#randomforest"><i class="fa fa-check"></i><b>8.6.2</b> 利用隨機森林套件randomForest進行監督式學習</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R語言課程講義</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="supervised_machine_learning" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> 利用R語言進行監督式機器學習</h1>
<div id="-14" class="section level2 unnumbered">
<h2>課程簡介</h2>
<div id="-15" class="section level3 unnumbered">
<h3>課程簡介</h3>
</div>
<div id="-6" class="section level3 unnumbered">
<h3>學習目標</h3>
</div>
</div>
<div id="section-8.1" class="section level2">
<h2><span class="header-section-number">8.1</span> 監督式機器學習</h2>
<p>監督式機器學習 (supervised machine learning)是利用一組已經標注結果的資料，預測尚未標注結果的新資料的可能結果。以數學的方式來表示這個概念，監督式機器學習利用一組資料 <span class="math inline">\(X_{1}, X_{2}, ..., X_{N}\)</span> 以及其對應的結果 <span class="math inline">\(Y_{1}, Y_{2}, ..., Y_{N}\)</span> ，設法找到一個模型 <span class="math inline">\(f(x)\)</span> ，盡可能使 <span class="math inline">\(f(X_{1}) = Y_{1}\)</span> 、 <span class="math inline">\(f(X_{2}) = Y_{2}\)</span> 、…、 <span class="math inline">\(f(X_{N}) = Y_{N}\)</span> 。當有新的資料 <span class="math inline">\(\hat{X}\)</span> 進入時，可以利用 <span class="math inline">\(f(x)\)</span> 計算的結果 <span class="math inline">\(f(\hat{X})\)</span> ，做為可能結果的預測。</p>
<p>通常來說，如果要預測的結果是連續的數值，通常將這類的問題稱為<strong>迴歸 (regression)</strong>，如果是離散型的結果的話，則稱為<strong>分類 (classification)</strong>。</p>
<p>分類的問題可以視為運用現有的資料 <span class="math inline">\(X_{1}, X_{2}, ..., X_{N}\)</span> 以及其對應的類別 <span class="math inline">\(Y_{1}, Y_{2}, ..., Y_{N}\)</span> ，嘗試找到一個分類器模型 <span class="math inline">\(f(x)\)</span> 來預測新資料 <span class="math inline">\(\hat{X}\)</span> 的類別 <span class="math inline">\(f(\hat{X})\)</span> 。</p>
</div>
<div id="tmdb" class="section level2">
<h2><span class="header-section-number">8.2</span> TMDB電影評分預測</h2>
<p>TMDB資料是<a href="https://www.kaggle.com/">Kaggle</a>提供做為學習資料科學的資料集。Kaggle利用<a href="https://www.themoviedb.org/?language=zh-TW">TMDB (The Movie Database)</a>提供的電影資料建立的資料集，大約有5000筆電影資料，在Kaggle上的下載點為<a href="https://www.kaggle.com/tmdb/tmdb-movie-metadata/downloads/tmdb-5000-movie-dataset.zip/2">TMDB 5000 Movie Dataset</a>。</p>
<p>本次課程將利用TMDB資料集說明如何應用電影資料(片長、類型、製作公司、預算、收入、…等)，進行監督式機器學習，預測電影評分。可參考<a href="http://rstudio-pubs-static.s3.amazonaws.com/342210_7c8d57cfdd784cf58dc077d3eb7a2ca3.html#problem-statement">Project Report: IMDB 5000 Movie Dataset</a>，有類似的做法。</p>
<div id="section-8.2.1" class="section level3">
<h3><span class="header-section-number">8.2.1</span> 讀入資料</h3>
<p>載入<code>tidyverse</code>套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<p>讀取TMDB資料集</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;tmdb_5000_movies.csv&quot;</span>)</code></pre></div>
<p>讀入資料後，先看目前的情況。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(movies)</code></pre></div>
<pre><code>##      budget             genres            homepage        
##  Min.   :        0   Length:4803        Length:4803       
##  1st Qu.:   790000   Class :character   Class :character  
##  Median : 15000000   Mode  :character   Mode  :character  
##  Mean   : 29045040                                        
##  3rd Qu.: 40000000                                        
##  Max.   :380000000                                        
##                                                           
##        id           keywords         original_language  original_title    
##  Min.   :     5   Length:4803        Length:4803        Length:4803       
##  1st Qu.:  9014   Class :character   Class :character   Class :character  
##  Median : 14629   Mode  :character   Mode  :character   Mode  :character  
##  Mean   : 57166                                                           
##  3rd Qu.: 58611                                                           
##  Max.   :459488                                                           
##                                                                           
##    overview           popularity      production_companies
##  Length:4803        Min.   :  0.000   Length:4803         
##  Class :character   1st Qu.:  4.668   Class :character    
##  Mode  :character   Median : 12.922   Mode  :character    
##                     Mean   : 21.492                       
##                     3rd Qu.: 28.314                       
##                     Max.   :875.581                       
##                                                           
##  production_countries  release_date           revenue         
##  Length:4803          Min.   :1916-09-04   Min.   :0.000e+00  
##  Class :character     1st Qu.:1999-07-14   1st Qu.:0.000e+00  
##  Mode  :character     Median :2005-10-03   Median :1.917e+07  
##                       Mean   :2002-12-27   Mean   :8.226e+07  
##                       3rd Qu.:2011-02-16   3rd Qu.:9.292e+07  
##                       Max.   :2017-02-03   Max.   :2.788e+09  
##                       NA&#39;s   :1                               
##     runtime      spoken_languages      status            tagline         
##  Min.   :  0.0   Length:4803        Length:4803        Length:4803       
##  1st Qu.: 94.0   Class :character   Class :character   Class :character  
##  Median :103.0   Mode  :character   Mode  :character   Mode  :character  
##  Mean   :106.9                                                           
##  3rd Qu.:118.0                                                           
##  Max.   :338.0                                                           
##  NA&#39;s   :2                                                               
##     title            vote_average      vote_count     
##  Length:4803        Min.   : 0.000   Min.   :    0.0  
##  Class :character   1st Qu.: 5.600   1st Qu.:   54.0  
##  Mode  :character   Median : 6.200   Median :  235.0  
##                     Mean   : 6.092   Mean   :  690.2  
##                     3rd Qu.: 6.800   3rd Qu.:  737.0  
##                     Max.   :10.000   Max.   :13752.0  
## </code></pre>
</div>
</div>
<div id="section-8.3" class="section level2">
<h2><span class="header-section-number">8.3</span> 資料整理與探索性資料分析</h2>
<p>整理各個variable，分為以下四類</p>
<ol style="list-style-type: decimal">
<li>電影編號：id</li>
<li>與本次分析無關者：homepage, keywords, original_title, overview, production_countries, spoken_languages, status, tagline, title</li>
<li>數值資料類型：budget, popularity, revenue, runtime, vote_average, vote_count</li>
<li>日期資料類型：release_date</li>
<li>簡單字串資料類型：original_language</li>
<li>複雜字串資料類型：genres, production_companies</li>
</ol>
<div id="variables" class="section level3">
<h3><span class="header-section-number">8.3.1</span> 處理與本次分析無關的variables</h3>
<p>與本次分析無關的variables，不需進一步分析，可以直接捨棄。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>homepage, <span class="op">-</span>keywords, <span class="op">-</span>original_title, <span class="op">-</span>overview, <span class="op">-</span>production_countries, <span class="op">-</span>spoken_languages, <span class="op">-</span>status, <span class="op">-</span>tagline, <span class="op">-</span>title)</code></pre></div>
<p>捨棄這些variables後，資料集從20個variables，轉換為11個variables。</p>
</div>
<div id="section-8.3.2" class="section level3">
<h3><span class="header-section-number">8.3.2</span> 數值資料類型</h3>
<p>觀察每個數值資料的範圍</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(budget, popularity, revenue, runtime, vote_average, vote_count) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>##      budget            popularity         revenue             runtime     
##  Min.   :        0   Min.   :  0.000   Min.   :0.000e+00   Min.   :  0.0  
##  1st Qu.:   790000   1st Qu.:  4.668   1st Qu.:0.000e+00   1st Qu.: 94.0  
##  Median : 15000000   Median : 12.922   Median :1.917e+07   Median :103.0  
##  Mean   : 29045040   Mean   : 21.492   Mean   :8.226e+07   Mean   :106.9  
##  3rd Qu.: 40000000   3rd Qu.: 28.314   3rd Qu.:9.292e+07   3rd Qu.:118.0  
##  Max.   :380000000   Max.   :875.581   Max.   :2.788e+09   Max.   :338.0  
##                                                            NA&#39;s   :2      
##   vote_average      vote_count     
##  Min.   : 0.000   Min.   :    0.0  
##  1st Qu.: 5.600   1st Qu.:   54.0  
##  Median : 6.200   Median :  235.0  
##  Mean   : 6.092   Mean   :  690.2  
##  3rd Qu.: 6.800   3rd Qu.:  737.0  
##  Max.   :10.000   Max.   :13752.0  
## </code></pre>
<p><code>budget</code>(預算)、<code>revenue</code>(收入)、<code>runtime</code>(放映時間)、<code>vote_count</code>(投票人數)等為0並不合理，首先刪除這些資料為0者</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(budget<span class="op">&gt;</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>revenue<span class="op">&gt;</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>runtime<span class="op">&gt;</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>vote_count<span class="op">&gt;</span><span class="dv">0</span>)</code></pre></div>
<p>再觀察每個數值資料的範圍</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(budget, popularity, revenue, runtime, vote_average, vote_count) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>##      budget            popularity        revenue             runtime     
##  Min.   :        1   Min.   :  0.02   Min.   :5.000e+00   Min.   : 41.0  
##  1st Qu.: 10500000   1st Qu.: 10.48   1st Qu.:1.704e+07   1st Qu.: 96.0  
##  Median : 25000000   Median : 20.42   Median :5.520e+07   Median :107.0  
##  Mean   : 40678774   Mean   : 29.05   Mean   :1.213e+08   Mean   :110.7  
##  3rd Qu.: 55000000   3rd Qu.: 37.35   3rd Qu.:1.464e+08   3rd Qu.:121.0  
##  Max.   :380000000   Max.   :875.58   Max.   :2.788e+09   Max.   :338.0  
##   vote_average     vote_count     
##  Min.   :2.300   Min.   :    1.0  
##  1st Qu.:5.800   1st Qu.:  178.0  
##  Median :6.300   Median :  471.0  
##  Mean   :6.313   Mean   :  977.9  
##  3rd Qu.:6.900   3rd Qu.: 1148.0  
##  Max.   :8.500   Max.   :13752.0</code></pre>
<p><code>budget</code>最小為1 ，看起來仍然不合理。顯示<code>budget</code>少於1000的電影共幾筆？</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;budget少於1000的電影數量：&quot;</span>, <span class="kw">nrow</span>(movies[movies<span class="op">$</span>budget<span class="op">&lt;</span><span class="dv">1000</span>,])))</code></pre></div>
<pre><code>## [1] &quot;budget少於1000的電影數量： 13&quot;</code></pre>
<p>刪除<code>budget</code>少於1000的電影</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(budget<span class="op">&gt;=</span><span class="dv">1000</span>)</code></pre></div>
<p>收入太少，也不正常，顯示<code>revenue</code>少於1000的電影共幾筆？</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;revenue少於1000的電影數量：&quot;</span>, <span class="kw">nrow</span>(movies[movies<span class="op">$</span>revenue<span class="op">&lt;</span><span class="dv">1000</span>,])))</code></pre></div>
<pre><code>## [1] &quot;revenue少於1000的電影數量： 5&quot;</code></pre>
<p>再刪除<code>revenue</code>少於1000的電影</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(revenue<span class="op">&gt;=</span><span class="dv">1000</span>)</code></pre></div>
<p>分析<code>runtime</code>的分布情形</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(movies<span class="op">$</span>runtime)</code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    41.0    96.0   107.0   110.8   121.0   338.0</code></pre>
<p>畫成直方圖看看</p>
<p>似乎OK.</p>
<p>最後分析<code>vote_count</code>，投票人數太少，資料較不準確，顯示<code>vote_count</code>少於100的電影共幾筆？</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;vote_count少於100的電影數量：&quot;</span>, <span class="kw">nrow</span>(movies[movies<span class="op">$</span>vote_count<span class="op">&lt;</span><span class="dv">100</span>,])))</code></pre></div>
<pre><code>## [1] &quot;vote_count少於100的電影數量： 501&quot;</code></pre>
<p>再刪除<code>vote_count</code>少於100的電影</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(vote_count<span class="op">&gt;=</span><span class="dv">100</span>)</code></pre></div>
<p>再觀察每個數值資料的範圍</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(budget, popularity, revenue, runtime, vote_average, vote_count) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>##      budget            popularity         revenue             runtime     
##  Min.   :     7000   Min.   :  1.041   Min.   :2.200e+04   Min.   : 63.0  
##  1st Qu.: 14000000   1st Qu.: 14.977   1st Qu.:3.001e+07   1st Qu.: 97.0  
##  Median : 30000000   Median : 24.901   Median :7.575e+07   Median :107.0  
##  Mean   : 45711244   Mean   : 33.757   Mean   :1.422e+08   Mean   :111.1  
##  3rd Qu.: 60000000   3rd Qu.: 41.500   3rd Qu.:1.700e+08   3rd Qu.:122.0  
##  Max.   :380000000   Max.   :875.581   Max.   :2.788e+09   Max.   :248.0  
##   vote_average     vote_count     
##  Min.   :3.000   Min.   :  100.0  
##  1st Qu.:5.800   1st Qu.:  297.0  
##  Median :6.400   Median :  611.5  
##  Mean   :6.376   Mean   : 1155.4  
##  3rd Qu.:7.000   3rd Qu.: 1369.2  
##  Max.   :8.500   Max.   :13752.0</code></pre>
</div>
<div id="section-8.3.3" class="section level3">
<h3><span class="header-section-number">8.3.3</span> 日期資料類型</h3>
<p>分析<code>release_date</code>，因為其資料型態是<code>Date</code>，所以載入日期時間處理套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre></div>
<p>觀察<code>release_date</code>的分布情形</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(movies<span class="op">$</span>release_date)</code></pre></div>
<pre><code>##         Min.      1st Qu.       Median         Mean      3rd Qu. 
## &quot;1927-01-10&quot; &quot;1999-07-14&quot; &quot;2006-03-06&quot; &quot;2003-06-01&quot; &quot;2011-05-15&quot; 
##         Max. 
## &quot;2016-09-09&quot;</code></pre>
<p>從1927年到2016年，最早期的電影數較少</p>
<p>查看每年的上映電影數</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">release_year=</span><span class="kw">year</span>(release_date)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(release_year) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>release_year, <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">1910</span>, <span class="dv">2020</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">1910</span>, <span class="dv">2020</span>, <span class="dv">10</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;放映年份&quot;</span>, <span class="dt">y=</span><span class="st">&quot;電影數量&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey70&quot;</span>),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>))</code></pre></div>
<pre><code>## Warning: The `printer` argument is deprecated as of rlang 0.3.0.
## This warning is displayed once per session.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>以放映年份取代放映日期，便於之後的分析</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">release_year=</span><span class="kw">year</span>(release_date)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>release_date)</code></pre></div>
</div>
<div id="section-8.3.4" class="section level3">
<h3><span class="header-section-number">8.3.4</span> 簡單字串類型</h3>
<p>簡單字串資料類型與複雜資料的差別是前者的資料格式較單純，簡單字串資料類型只有一個variable：<code>original_language</code>。</p>
<p>分析<code>original_language</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(original_language) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">proportion=</span>count<span class="op">/</span><span class="kw">sum</span>(count)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(proportion))</code></pre></div>
<pre><code>## # A tibble: 24 x 3
##    original_language count proportion
##    &lt;chr&gt;             &lt;int&gt;      &lt;dbl&gt;
##  1 en                 2617    0.966  
##  2 fr                   18    0.00665
##  3 es                   13    0.00480
##  4 ja                   10    0.00369
##  5 de                    8    0.00295
##  6 zh                    8    0.00295
##  7 it                    5    0.00185
##  8 cn                    4    0.00148
##  9 ko                    4    0.00148
## 10 da                    3    0.00111
## # ... with 14 more rows</code></pre>
<p>可以發現雖然<code>original_language</code>中有許多可能的值，也就是收錄許多語言的電影，但絕大部分是英語片(96.64%)，因此捨棄這個variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>original_language)</code></pre></div>
</div>
<div id="section-8.3.5" class="section level3">
<h3><span class="header-section-number">8.3.5</span> 複雜字串資料類型</h3>
<p>IMDB 5000 Movie Dataset中，為了可以表示多個可能的值，<code>genres</code>(電影類型)和<code>production_companies</code>製作公司都是屬於較複雜的字串資料類型，而且都是以JSON的方式表示這些值。例如</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies<span class="op">$</span>genres[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] &quot;[{\&quot;id\&quot;: 28, \&quot;name\&quot;: \&quot;Action\&quot;}, {\&quot;id\&quot;: 12, \&quot;name\&quot;: \&quot;Adventure\&quot;}, {\&quot;id\&quot;: 14, \&quot;name\&quot;: \&quot;Fantasy\&quot;}, {\&quot;id\&quot;: 878, \&quot;name\&quot;: \&quot;Science Fiction\&quot;}]&quot;</code></pre>
<p>因此，為了表示這些值，首先載入JSON的處理套件<code>jsonlite</code>。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(jsonlite)</code></pre></div>
<p>並且撰寫一個函數來取得這些variable上所有的資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">valueExtract &lt;-<span class="st"> </span><span class="cf">function</span> (y) {
  x&lt;-<span class="st"> </span><span class="kw">fromJSON</span>(y)
  g &lt;-<span class="st"> </span><span class="kw">paste</span>(x<span class="op">$</span>name, <span class="dt">collapse=</span><span class="st">&quot;%&quot;</span>)
  <span class="kw">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>, g)
}</code></pre></div>
<p>首先處理所有電影的genres資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies<span class="op">$</span>genres_data &lt;-<span class="st"> </span><span class="kw">sapply</span>(movies<span class="op">$</span>genres, valueExtract)</code></pre></div>
<p>將電影的每一個genres展開</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_genres &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(id, genres_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">genres_data=</span><span class="kw">strsplit</span>(genres_data, <span class="dt">split=</span><span class="st">&quot;%&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unnest</span>(genres_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value=</span><span class="dv">1</span>)</code></pre></div>
<p>統計每一個genre出現的電影數，並繪製成圖形</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_genres <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(genres_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">sum</span>(value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(genres_data, count), <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1800</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1800</span>, <span class="dv">300</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;類型&quot;</span>, <span class="dt">y=</span><span class="st">&quot;電影數&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">axis.line =</span>  <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-27-1.png" width="672" /> 最多為Drama、Comedy、Thriller和Action，最少者如Western和Documentary。</p>
<p>將movies_genres從long format轉成wide format</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_genres &lt;-<span class="st"> </span>movies_genres <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">genres_data=</span><span class="kw">paste0</span>(<span class="st">&quot;g_&quot;</span>, genres_data)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key=</span>genres_data, <span class="dt">value=</span>value, <span class="dt">fill=</span><span class="dv">0</span>)</code></pre></div>
<p>合併兩個data frame，捨棄genres和genres_data兩個variables</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(movies_genres) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>genres, <span class="op">-</span>genres_data)</code></pre></div>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<p>分析<code>production_companies</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies<span class="op">$</span>pc_data &lt;-<span class="st"> </span><span class="kw">sapply</span>(movies<span class="op">$</span>production_companies, valueExtract)</code></pre></div>
<p>將電影的每一個<code>production_companies</code>展開</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_pc &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(id, pc_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pc_data=</span><span class="kw">strsplit</span>(pc_data, <span class="dt">split=</span><span class="st">&quot;%&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unnest</span>(pc_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value=</span><span class="dv">1</span>)</code></pre></div>
<p>統計電影製作公司與他們製作的電影數 (按電影數排名)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">production_companies &lt;-<span class="st"> </span>movies_pc <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(pc_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(count))</code></pre></div>
<p>製作電影數前100的電影製作公司</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top100pc &lt;-<span class="st"> </span>production_companies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pull</span>(pc_data)</code></pre></div>
<p>電影的製作公司包含幾家前100製作公司</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies_pc &lt;-<span class="st"> </span>movies_pc <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value=</span><span class="kw">ifelse</span>(pc_data <span class="op">%in%</span><span class="st"> </span>top100pc, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(id) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">top_pc_number=</span><span class="kw">sum</span>(value))</code></pre></div>
<p>將電影的製作公司包含前100製作公司的數量與movies合併，捨棄production_companies和pc_data兩個variables，並且將top_pc_number的<code>NA</code>值改為0。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(movies_pc) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>production_companies, <span class="op">-</span>pc_data) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">top_pc_number=</span><span class="kw">ifelse</span>(<span class="kw">is.na</span>(top_pc_number), <span class="dv">0</span>, top_pc_number))</code></pre></div>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
</div>
<div id="section-8.3.6" class="section level3">
<h3><span class="header-section-number">8.3.6</span> 準備預測目標</h3>
<p>預測的目標variable為<code>vote_average</code>，檢視這個variable的分布情形。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>vote_average), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1</span>), <span class="dt">minor_breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;vote_average區間&quot;</span>, <span class="dt">y=</span><span class="st">&quot;電影數量&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line=</span><span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey90&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>根據<code>vote_average</code>的分布情形，決定將這個variable分為x&lt;=5, 5<x<=6, 6<x<=7以及7<x等四個區間，將`vote_average`改為新的變數`vote_average_p`，做為接下來預測的目標。也就是以其他的variables來預測`vote_average_p`在哪一個區間(分類)。


```r
movies <- movies %>% mutate(vote_average_p=cut(vote_average, breaks=c(0, 5, 6, 7, 10))) %&gt;% select(-vote_average, -vote_count) ```</p>
<p>檢視資料區間內資料的數量</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(vote_average_p) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>vote_average_p, <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;vote_average_p區間&quot;</span>, <span class="dt">y=</span><span class="st">&quot;電影數量&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line=</span><span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey90&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
</div>
<div id="section-8.3.7" class="section level3">
<h3><span class="header-section-number">8.3.7</span> 完成資料整理</h3>
<p>在進行資料探勘前，最後再檢視一次movies</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(movies)</code></pre></div>
<pre><code>##      budget                id           popularity     
##  Min.   :     7000   Min.   :     5   Min.   :  1.041  
##  1st Qu.: 14000000   1st Qu.:  3010   1st Qu.: 14.977  
##  Median : 30000000   Median : 10586   Median : 24.901  
##  Mean   : 45711244   Mean   : 46166   Mean   : 33.757  
##  3rd Qu.: 60000000   3rd Qu.: 49030   3rd Qu.: 41.500  
##  Max.   :380000000   Max.   :417859   Max.   :875.581  
##     revenue             runtime       release_year     g_Action    
##  Min.   :2.200e+04   Min.   : 63.0   Min.   :1927   Min.   :0.000  
##  1st Qu.:3.001e+07   1st Qu.: 97.0   1st Qu.:1999   1st Qu.:0.000  
##  Median :7.575e+07   Median :107.0   Median :2006   Median :0.000  
##  Mean   :1.422e+08   Mean   :111.1   Mean   :2003   Mean   :0.301  
##  3rd Qu.:1.700e+08   3rd Qu.:122.0   3rd Qu.:2011   3rd Qu.:1.000  
##  Max.   :2.788e+09   Max.   :248.0   Max.   :2016   Max.   :1.000  
##   g_Adventure      g_Animation         g_Comedy         g_Crime      
##  Min.   :0.0000   Min.   :0.00000   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:0.0000   1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:0.0000  
##  Median :0.0000   Median :0.00000   Median :0.0000   Median :0.0000  
##  Mean   :0.2249   Mean   :0.06315   Mean   :0.3357   Mean   :0.1702  
##  3rd Qu.:0.0000   3rd Qu.:0.00000   3rd Qu.:1.0000   3rd Qu.:0.0000  
##  Max.   :1.0000   Max.   :1.00000   Max.   :1.0000   Max.   :1.0000  
##  g_Documentary         g_Drama          g_Family        g_Fantasy     
##  Min.   :0.000000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:0.000000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  
##  Median :0.000000   Median :0.0000   Median :0.0000   Median :0.0000  
##  Mean   :0.004801   Mean   :0.4206   Mean   :0.1185   Mean   :0.1182  
##  3rd Qu.:0.000000   3rd Qu.:1.0000   3rd Qu.:0.0000   3rd Qu.:0.0000  
##  Max.   :1.000000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##    g_History          g_Horror         g_Music         g_Mystery      
##  Min.   :0.00000   Min.   :0.0000   Min.   :0.0000   Min.   :0.00000  
##  1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.00000  
##  Median :0.00000   Median :0.0000   Median :0.0000   Median :0.00000  
##  Mean   :0.04025   Mean   :0.1152   Mean   :0.0277   Mean   :0.08826  
##  3rd Qu.:0.00000   3rd Qu.:0.0000   3rd Qu.:0.0000   3rd Qu.:0.00000  
##  Max.   :1.00000   Max.   :1.0000   Max.   :1.0000   Max.   :1.00000  
##    g_Romance      g_Science_Fiction   g_Thriller         g_War        
##  Min.   :0.0000   Min.   :0.000     Min.   :0.0000   Min.   :0.00000  
##  1st Qu.:0.0000   1st Qu.:0.000     1st Qu.:0.0000   1st Qu.:0.00000  
##  Median :0.0000   Median :0.000     Median :0.0000   Median :0.00000  
##  Mean   :0.1632   Mean   :0.147     Mean   :0.3124   Mean   :0.03434  
##  3rd Qu.:0.0000   3rd Qu.:0.000     3rd Qu.:1.0000   3rd Qu.:0.00000  
##  Max.   :1.0000   Max.   :1.000     Max.   :1.0000   Max.   :1.00000  
##    g_Western      top_pc_number  vote_average_p
##  Min.   :0.0000   Min.   :0.00   (0,5] : 152   
##  1st Qu.:0.0000   1st Qu.:1.00   (5,6] : 775   
##  Median :0.0000   Median :1.00   (6,7] :1199   
##  Mean   :0.0144   Mean   :1.37   (7,10]: 582   
##  3rd Qu.:0.0000   3rd Qu.:2.00                 
##  Max.   :1.0000   Max.   :8.00</code></pre>
<p>捨棄variable <code>id</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">movies &lt;-<span class="st"> </span>movies <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>id)</code></pre></div>
</div>
</div>
<div id="section-8.4" class="section level2">
<h2><span class="header-section-number">8.4</span> 監督式機器學習常用的測試套件</h2>
<p>載入套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(caret)</code></pre></div>
<div id="section-8.4.1" class="section level3">
<h3><span class="header-section-number">8.4.1</span> 切分訓練與測試資料</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sd &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">second</span>(<span class="kw">Sys.time</span>())<span class="op">*</span><span class="dv">100</span>)

<span class="kw">set.seed</span>(sd)

<span class="co"># Step 1: Get row numbers for the training data</span>
trainRowNumbers &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(movies<span class="op">$</span>vote_average_p, <span class="dt">p=</span><span class="fl">0.8</span>, <span class="dt">list=</span><span class="ot">FALSE</span>)

<span class="co"># Step 2: Create the training  dataset</span>
train_set &lt;-<span class="st"> </span>movies[trainRowNumbers,]

<span class="co"># Step 3: Create the test dataset</span>
test_set &lt;-<span class="st"> </span>movies[<span class="op">-</span>trainRowNumbers,]</code></pre></div>
</div>
</div>
<div id="section-8.5" class="section level2">
<h2><span class="header-section-number">8.5</span> 進行分類樹監督式學習</h2>
<div id="rpart" class="section level3">
<h3><span class="header-section-number">8.5.1</span> 利用rpart套件進行分類樹監督式學習</h3>
<p>載入分類樹及相關繪圖套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rpart)
<span class="kw">library</span>(rpart.plot)</code></pre></div>
<p>利用train_set的資料訓練分類樹</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">class.tree &lt;-<span class="st"> </span><span class="kw">rpart</span>(vote_average_p <span class="op">~</span><span class="st"> </span>.,
                    <span class="dt">data =</span> train_set, <span class="dt">method =</span> <span class="st">&quot;class&quot;</span>,
                    <span class="dt">minsplit=</span><span class="dv">30</span>, <span class="dt">cp=</span><span class="fl">0.00001</span>, <span class="dt">xval=</span><span class="dv">5</span>)</code></pre></div>
<p>顯示訓練的結果</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">printcp</span>(class.tree)</code></pre></div>
<pre><code>## 
## Classification tree:
## rpart(formula = vote_average_p ~ ., data = train_set, method = &quot;class&quot;, 
##     minsplit = 30, cp = 1e-05, xval = 5)
## 
## Variables actually used in tree construction:
##  [1] budget            g_Action          g_Animation      
##  [4] g_Comedy          g_Crime           g_Drama          
##  [7] g_Horror          g_Science_Fiction popularity       
## [10] release_year      revenue           runtime          
## [13] top_pc_number    
## 
## Root node error: 1208/2168 = 0.5572
## 
## n= 2168 
## 
##            CP nsplit rel error  xerror     xstd
## 1  0.03807947      0   1.00000 1.00000 0.019146
## 2  0.02152318      3   0.88576 0.91391 0.019269
## 3  0.02069536      5   0.84272 0.89818 0.019272
## 4  0.01200331      6   0.82202 0.86341 0.019258
## 5  0.00827815      8   0.79801 0.83444 0.019225
## 6  0.00745033     11   0.77318 0.83195 0.019221
## 7  0.00662252     12   0.76573 0.82864 0.019216
## 8  0.00579470     13   0.75911 0.81788 0.019197
## 9  0.00524283     15   0.74752 0.81788 0.019197
## 10 0.00496689     18   0.73179 0.82450 0.019209
## 11 0.00455298     23   0.70695 0.82368 0.019207
## 12 0.00413907     26   0.69123 0.82450 0.019209
## 13 0.00372517     28   0.68295 0.82864 0.019216
## 14 0.00331126     34   0.66060 0.82368 0.019207
## 15 0.00289735     40   0.63576 0.82947 0.019217
## 16 0.00248344     44   0.62417 0.82450 0.019209
## 17 0.00206954     51   0.60679 0.81540 0.019192
## 18 0.00193157     64   0.57864 0.81954 0.019200
## 19 0.00165563     67   0.57285 0.81954 0.019200
## 20 0.00124172     73   0.56291 0.82202 0.019204
## 21 0.00082781     75   0.56043 0.83526 0.019226
## 22 0.00041391     77   0.55877 0.84354 0.019238
## 23 0.00027594     79   0.55795 0.84520 0.019240
## 24 0.00001000     82   0.55712 0.84520 0.019240</code></pre>
<p>分類樹如果太大，會有過度擬合(overfitting)的問題，也就是太像訓練資料，對沒有參與訓練的資料，表現可能不理想。所以分類樹通常會經過裁減(pruning)，選擇預測能力較好的部分，也就是上面xerror最小的cp值。</p>
<p>xerror最小值</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(class.tree<span class="op">$</span>cptable[, <span class="st">&quot;xerror&quot;</span>])</code></pre></div>
<pre><code>## [1] 0.8153974</code></pre>
<p>xerror最小的層級</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which.min</span>(class.tree<span class="op">$</span>cptable[, <span class="st">&quot;xerror&quot;</span>])</code></pre></div>
<pre><code>## 17 
## 17</code></pre>
<p>xerror最小的cp值</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">class.tree<span class="op">$</span>cptable[<span class="kw">which.min</span>(class.tree<span class="op">$</span>cptable[, <span class="st">&quot;xerror&quot;</span>]), <span class="st">&quot;CP&quot;</span>]</code></pre></div>
<pre><code>## [1] 0.002069536</code></pre>
<p>以xerror最小的cp值進行裁減</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pruned.tree &lt;-<span class="st"> </span><span class="kw">prune</span>(class.tree,
                     <span class="dt">cp =</span> class.tree<span class="op">$</span>cptable[<span class="kw">which.min</span>(class.tree<span class="op">$</span>cptable[,<span class="st">&quot;xerror&quot;</span>]),<span class="st">&quot;CP&quot;</span>])</code></pre></div>
<p>以訓練好的分類樹模型進行訓練資料(train_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train_res &lt;-<span class="st"> </span><span class="kw">predict</span>(pruned.tree, train_set, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)

<span class="kw">confusionMatrix</span>(train_res, train_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]     12     1     3      0
##     (5,6]     92   409   146     17
##     (6,7]     16   194   719    154
##     (7,10]     2    16    92    295
## 
## Overall Statistics
##                                           
##                Accuracy : 0.6619          
##                  95% CI : (0.6415, 0.6818)
##     No Information Rate : 0.4428          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.4804          
##                                           
##  Mcnemar&#39;s Test P-Value : &lt; 2.2e-16       
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.098361       0.6597       0.7490        0.6330
## Specificity              0.998045       0.8353       0.6987        0.9354
## Pos Pred Value           0.750000       0.6160       0.6639        0.7284
## Neg Pred Value           0.948885       0.8597       0.7779        0.9030
## Prevalence               0.056273       0.2860       0.4428        0.2149
## Detection Rate           0.005535       0.1887       0.3316        0.1361
## Detection Prevalence     0.007380       0.3063       0.4995        0.1868
## Balanced Accuracy        0.548203       0.7475       0.7238        0.7842</code></pre>
<p>以訓練好的分類模型進行測試資料(test_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_res &lt;-<span class="st"> </span><span class="kw">predict</span>(pruned.tree, test_set, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)

<span class="kw">confusionMatrix</span>(test_res, test_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]      3     0     0      0
##     (5,6]     26    81    59      3
##     (6,7]      1    67   158     49
##     (7,10]     0     7    22     64
## 
## Overall Statistics
##                                           
##                Accuracy : 0.5667          
##                  95% CI : (0.5237, 0.6089)
##     No Information Rate : 0.4426          
##     P-Value [Acc &gt; NIR] : 4.819e-09       
##                                           
##                   Kappa : 0.3307          
##                                           
##  Mcnemar&#39;s Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.100000       0.5226       0.6611        0.5517
## Specificity              1.000000       0.7714       0.6113        0.9316
## Pos Pred Value           1.000000       0.4793       0.5745        0.6882
## Neg Pred Value           0.949721       0.8005       0.6943        0.8837
## Prevalence               0.055556       0.2870       0.4426        0.2148
## Detection Rate           0.005556       0.1500       0.2926        0.1185
## Detection Prevalence     0.005556       0.3130       0.5093        0.1722
## Balanced Accuracy        0.550000       0.6470       0.6362        0.7417</code></pre>
<p>由於模型是由訓練資料內的模式產生，一般來說，訓練資料的分類成效會比測試資料來得好。</p>
</div>
<div id="caretrpart" class="section level3">
<h3><span class="header-section-number">8.5.2</span> 利用caret套件的rpart方法進行分類樹監督式學習</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod_rpart &lt;-<span class="st"> </span><span class="kw">train</span>(vote_average_p <span class="op">~</span><span class="st"> </span>.,
                   <span class="dt">method =</span> <span class="st">&quot;rpart&quot;</span>,
                   <span class="dt">data =</span> train_set,
                   <span class="dt">tuneLength =</span> <span class="dv">10</span>, 
                   <span class="dt">metric =</span> <span class="st">&quot;Accuracy&quot;</span>,
                   <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;repeatedcv&quot;</span>,
                                            <span class="dt">number =</span> <span class="dv">3</span>,
                                            <span class="dt">repeats =</span> <span class="dv">10</span>,
                                            <span class="dt">search =</span> <span class="st">&#39;random&#39;</span>))</code></pre></div>
<p>以訓練好的分類模型進行訓練資料(train_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train_res &lt;-<span class="st"> </span><span class="kw">predict</span>(mod_rpart, train_set)

<span class="kw">confusionMatrix</span>(train_res, train_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]     12     1     3      0
##     (5,6]     84   354   141     13
##     (6,7]     25   244   698    203
##     (7,10]     1    21   118    250
## 
## Overall Statistics
##                                           
##                Accuracy : 0.6061          
##                  95% CI : (0.5852, 0.6267)
##     No Information Rate : 0.4428          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.3882          
##                                           
##  Mcnemar&#39;s Test P-Value : &lt; 2.2e-16       
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.098361       0.5710       0.7271        0.5365
## Specificity              0.998045       0.8463       0.6093        0.9177
## Pos Pred Value           0.750000       0.5980       0.5966        0.6410
## Neg Pred Value           0.948885       0.8312       0.7375        0.8785
## Prevalence               0.056273       0.2860       0.4428        0.2149
## Detection Rate           0.005535       0.1633       0.3220        0.1153
## Detection Prevalence     0.007380       0.2731       0.5397        0.1799
## Balanced Accuracy        0.548203       0.7086       0.6682        0.7271</code></pre>
<p>以訓練好的分類模型進行測試資料(test_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_res &lt;-<span class="st"> </span><span class="kw">predict</span>(mod_rpart, test_set)

<span class="kw">confusionMatrix</span>(test_res, test_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]      3     0     0      0
##     (5,6]     25    75    46      3
##     (6,7]      2    70   166     55
##     (7,10]     0    10    27     58
## 
## Overall Statistics
##                                           
##                Accuracy : 0.5593          
##                  95% CI : (0.5162, 0.6016)
##     No Information Rate : 0.4426          
##     P-Value [Acc &gt; NIR] : 3.487e-08       
##                                           
##                   Kappa : 0.3141          
##                                           
##  Mcnemar&#39;s Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.100000       0.4839       0.6946        0.5000
## Specificity              1.000000       0.8078       0.5781        0.9127
## Pos Pred Value           1.000000       0.5034       0.5666        0.6105
## Neg Pred Value           0.949721       0.7954       0.7045        0.8697
## Prevalence               0.055556       0.2870       0.4426        0.2148
## Detection Rate           0.005556       0.1389       0.3074        0.1074
## Detection Prevalence     0.005556       0.2759       0.5426        0.1759
## Balanced Accuracy        0.550000       0.6458       0.6363        0.7064</code></pre>
<p>兩種方法所得到的成效結果相當接近。</p>
</div>
</div>
<div id="section-8.6" class="section level2">
<h2><span class="header-section-number">8.6</span> 進行隨機森林監督式學習</h2>
<div id="section" class="section level3">
<h3><span class="header-section-number">8.6.1</span> </h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod_rf &lt;-<span class="st"> </span><span class="kw">train</span>(vote_average_p <span class="op">~</span><span class="st"> </span>.,
                <span class="dt">method =</span> <span class="st">&quot;rf&quot;</span>,
                <span class="dt">data =</span> train_set,
                <span class="dt">tuneLength =</span> <span class="dv">10</span>, 
                <span class="dt">metric =</span> <span class="st">&quot;Accuracy&quot;</span>,
                <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;repeatedcv&quot;</span>,
                                         <span class="dt">number =</span> <span class="dv">3</span>,
                                         <span class="dt">repeats =</span> <span class="dv">10</span>,
                                         <span class="dt">search =</span> <span class="st">&#39;random&#39;</span>))</code></pre></div>
<p>以訓練好的分類模型進行訓練資料(train_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train_res &lt;-<span class="st"> </span><span class="kw">predict</span>(mod_rf, train_set)

<span class="kw">confusionMatrix</span>(train_res, train_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]    122     0     0      0
##     (5,6]      0   620     0      0
##     (6,7]      0     0   960      0
##     (7,10]     0     0     0    466
## 
## Overall Statistics
##                                      
##                Accuracy : 1          
##                  95% CI : (0.9983, 1)
##     No Information Rate : 0.4428     
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16  
##                                      
##                   Kappa : 1          
##                                      
##  Mcnemar&#39;s Test P-Value : NA         
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity               1.00000        1.000       1.0000        1.0000
## Specificity               1.00000        1.000       1.0000        1.0000
## Pos Pred Value            1.00000        1.000       1.0000        1.0000
## Neg Pred Value            1.00000        1.000       1.0000        1.0000
## Prevalence                0.05627        0.286       0.4428        0.2149
## Detection Rate            0.05627        0.286       0.4428        0.2149
## Detection Prevalence      0.05627        0.286       0.4428        0.2149
## Balanced Accuracy         1.00000        1.000       1.0000        1.0000</code></pre>
<p>以訓練好的分類模型進行測試資料(test_set)分類的成效</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_res &lt;-<span class="st"> </span><span class="kw">predict</span>(mod_rf, test_set)

<span class="kw">confusionMatrix</span>(test_res, test_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]      5     3     0      0
##     (5,6]     24    77    49      3
##     (6,7]      1    71   172     46
##     (7,10]     0     4    18     67
## 
## Overall Statistics
##                                           
##                Accuracy : 0.5944          
##                  95% CI : (0.5517, 0.6362)
##     No Information Rate : 0.4426          
##     P-Value [Acc &gt; NIR] : 1.006e-12       
##                                           
##                   Kappa : 0.371           
##                                           
##  Mcnemar&#39;s Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.166667       0.4968       0.7197        0.5776
## Specificity              0.994118       0.8026       0.6080        0.9481
## Pos Pred Value           0.625000       0.5033       0.5931        0.7528
## Neg Pred Value           0.953008       0.7984       0.7320        0.8914
## Prevalence               0.055556       0.2870       0.4426        0.2148
## Detection Rate           0.009259       0.1426       0.3185        0.1241
## Detection Prevalence     0.014815       0.2833       0.5370        0.1648
## Balanced Accuracy        0.580392       0.6497       0.6638        0.7628</code></pre>
</div>
<div id="randomforest" class="section level3">
<h3><span class="header-section-number">8.6.2</span> 利用隨機森林套件randomForest進行監督式學習</h3>
<p>載入隨機森林套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(randomForest)</code></pre></div>
<pre><code>## Warning: package &#39;randomForest&#39; was built under R version 3.5.3</code></pre>
<pre><code>## randomForest 4.6-14</code></pre>
<pre><code>## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>## 
## Attaching package: &#39;randomForest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     margin</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rf &lt;-<span class="st"> </span><span class="kw">randomForest</span>(vote_average_p <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> train_set)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">importance &lt;-<span class="st"> </span><span class="kw">importance</span>(rf)
<span class="kw">data.frame</span>(<span class="dt">variable=</span><span class="kw">dimnames</span>(importance)[[<span class="dv">1</span>]],
           <span class="dt">MeanDecreaseGini=</span>importance,
           <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(MeanDecreaseGini)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(variable, MeanDecreaseGini), <span class="dt">y=</span>MeanDecreaseGini)) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>()</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rf_res &lt;-<span class="st"> </span><span class="kw">predict</span>(rf, test_set)

<span class="kw">confusionMatrix</span>(rf_res, test_set<span class="op">$</span>vote_average_p)</code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction (0,5] (5,6] (6,7] (7,10]
##     (0,5]      3     1     0      0
##     (5,6]     26    76    45      2
##     (6,7]      1    75   182     56
##     (7,10]     0     3    12     58
## 
## Overall Statistics
##                                           
##                Accuracy : 0.5907          
##                  95% CI : (0.5479, 0.6325)
##     No Information Rate : 0.4426          
##     P-Value [Acc &gt; NIR] : 3.432e-12       
##                                           
##                   Kappa : 0.3545          
##                                           
##  Mcnemar&#39;s Test P-Value : NA              
## 
## Statistics by Class:
## 
##                      Class: (0,5] Class: (5,6] Class: (6,7] Class: (7,10]
## Sensitivity              0.100000       0.4903       0.7615        0.5000
## Specificity              0.998039       0.8104       0.5615        0.9646
## Pos Pred Value           0.750000       0.5101       0.5796        0.7945
## Neg Pred Value           0.949627       0.7980       0.7478        0.8758
## Prevalence               0.055556       0.2870       0.4426        0.2148
## Detection Rate           0.005556       0.1407       0.3370        0.1074
## Detection Prevalence     0.007407       0.2759       0.5815        0.1352
## Balanced Accuracy        0.549020       0.6504       0.6615        0.7323</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unsupervised-machine-learning.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/08_supervised_ml.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
